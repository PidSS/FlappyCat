<!DOCTYPE html>
<html>
    <head>
        <title>登录页面</title>
        <script type="text/javascript" src="jquery-3.6.1.min.js"></script>
        <script type="text/javascript" src="md5.min.js"></script>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    </head>
    <body>
        <h1>说明文档</h1>
        <div>6月9日更新：
            <ul>
                <li>项目完工</li>
                <li>由于发生了一些改动，本文档部分内容已失去时效性，只作参考。</li>
                <li>由于上一条，接口演示页面已无法使用（也不应该使用），但仍可访问查看。</li>
                <li>开发时的数据表已经清空，但序号自增没有清。</li>
            </ul>
        </div>
        <div>后端采用了node.js。由于浏览器的同源策略限制，前后端分离开发的情况下想要设置cookie很难弄，所以身份验证暂时跳过吧，之后做得差不多了把前端页面在服务器上托管就可以继续完善身份验证的部分了。</div>
        <div>部分需要身份验证才能访问的接口，暂时用在参数中携带id的方式来代替（/settlement）。</div>
       	<div>目前所有已存在的账号(id1~6)的密码均为123456。账号列表可在rank.html中看到。</div>
	<div>所有接口用GET和POST方法都可以访问</div>
	<h3>提供的接口操作预览页面：</h3>
        <ul>
            <li><a href="/docs/login.html">/login与/register</a></li>
            <li><a href="/docs/rank.html">/rank</a></li>
            <li><a href="/docs/settlement.html">/settlement</a></li>
        </ul>
        <div>可以查看页面源码 能用的话就直接复制</div>
        <h3>接口说明</h3>
        <ul>
            <li>
                <h4>/login</h4>
                <div>参数
                    <ul>
                        <li>name:用户名</li>
                        <li>password:密码（散列后）（请保留login.index中对密码的散列方式）</li>
                    </ul>
                    返回值
                    <ul>
                        <li>成功：返回相关用户信息
                            <ul>
                                <li>id:用户id</li>
                                <li>name:用户名</li>
                                <li>credits:积分数</li>
                                <li>record:最高得分纪录</li>
                            </ul>
                        </li>
                        <li>登陆失败:状态码401</li>
                        <li>参数缺失:状态码400</li>
                    </ul>
                </div>
            </li>
            <div>-------------------------------------------------------------------</div>
            <li>
                <h4>/register</h4>
                <div>参数
                    <ul>
                        <li>name:用户名</li>
                        <li>password:密码（散列后）（请保留login.index中对密码的散列方式）</li>
                    </ul>
                    返回值
                    <ul>
                        <li>成功：返回相关用户信息
                            <ul>
                                <li>id:用户id</li>
                                <li>name:用户名</li>
                                <li>credits:积分数</li>
                                <li>record:最高得分纪录</li>
                            </ul>
                        </li>
                        <li>用户名重复:状态码401</li>
                        <li>参数缺失:状态码400</li>
                        <li>数据库异常:状态码500</li>
                    </ul>
                </div>
            </li>
            <div>-------------------------------------------------------------------</div>
            <li>
                <h4>/rank</h4>
                <div>参数:无<br>
                    返回值:返回一个数组，按照record降序排序，每一项包括：
                    <ul>
                        <li>id:用户id</li>
                        <li>name:用户名</li>
                        <li>record:最高得分纪录</li>
                    </ul>
                </div>
            </li>
            <div>-------------------------------------------------------------------</div>
            <li>
                <h4>/settlement</h4>
                <div>说明：每局游戏结束后调用这个接口进行结算。上传本局游戏得分，用得分更新自己的最高分记录(record)，(得分/10)+20为本局游戏获得的积分(credits)数</div>
                <div>参数
                    <ul>
                        <li>id:用户id（临时使用这个参数）</li>
                        <li>mark:本局游戏得分</li>
                    </ul>
                    返回值
                    <ul>
                        <li>id:用户id</li>
                        <li>name:用户名</li>
                        <li>credits:积分数</li>
                        <li>record:最高得分纪录</li>
                        <li>broke:是否打破纪录</li>
                    </ul>
                    异常情况:id错误，状态码401
                </div>
            </li>
        </ul>
    </body>
</html>
